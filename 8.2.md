# 我们最喜欢的秘籍

这里是一个简短的教程，示例和代码片段的集合，展示了一些有用的经验和技巧，来制作更精美的图像，并克服一些 matplotlib 的缺陷。

## 共享轴限制和视图

通常用于使两个或更多绘图共享一个轴，例如，两个子绘图具有时间作为公共轴。 当你平移和缩放一个绘图，你想让另一个绘图一起移动。 为了方便这一点，matplotlib 轴支持`sharex`和`sharey`属性。 创建`subplot()`或`axes()`实例时，您可以传入一个关键字，表明要共享的轴。

```py
In [96]: t = np.arange(0, 10, 0.01)

In [97]: ax1 = plt.subplot(211)

In [98]: ax1.plot(t, np.sin(2*np.pi*t))
Out[98]: [<matplotlib.lines.Line2D object at 0x98719ec>]

In [99]: ax2 = plt.subplot(212, sharex=ax1)

In [100]: ax2.plot(t, np.sin(4*np.pi*t))
Out[100]: [<matplotlib.lines.Line2D object at 0xb7d8fec>]
```

## 轻松创建子图

在 matplotlib 的早期版本中，如果你想使用 pythonic API 并创建一个`figure`实例，并从中创建一个`subplots`网格，而且可能带有共享轴，它涉及大量的样板代码。 例如：

```py
# old style
fig = plt.figure()
ax1 = fig.add_subplot(221)
ax2 = fig.add_subplot(222, sharex=ax1, sharey=ax1)
ax3 = fig.add_subplot(223, sharex=ax1, sharey=ax1)
ax3 = fig.add_subplot(224, sharex=ax1, sharey=ax1)
```


Fernando Perez 提供了一个很好的顶级方法，来一次性创建`subplots()`（注意末尾的`s`），并为所有子图开启`x`和`y`共享。 您可以单独解构来获取轴域：

```py
# new style method 1; unpack the axes
fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, sharex=True, sharey=True)
ax1.plot(x)
```

或将它们作为行数乘列数的对象数组返回，支持 numpy 索引：

```py
# new style method 2; use an axes array
fig, axs = plt.subplots(2, 2, sharex=True, sharey=True)
axs[0,0].plot(x)
```

